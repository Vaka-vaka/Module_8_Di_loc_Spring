<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>User page</title>
    <div th:replace="main.html :: header"></div>
</head>
<body>
<div th:replace="main.html :: navigation"></div>

<div class="container">
    <div class="row">
        <h2>User page</h2>
    </div>

    <div class="row">
        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group me-2" role="group" aria-label="Second group">
                <a href="/users" type="button" class="btn btn-success">Back to users</a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="mb-3">
                    <label for="id" class="form-label">ID</label>
                    <input type="text" disabled class="form-control"
                           th:value="${user.id}"
                           id="id" placeholder="Id">
                </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="text" class="form-control"
                   th:value="${user.email}"
                   id="email" placeholder="User email">

        </div>
        <div class="mb-3">
            <label for="lastName" class="form-label">LastName</label>
            <input type="text" class="form-control"
                   th:value="${user.lastName}"
                   id="lastName" placeholder="User lastName">
        </div>
        <div class="mb-3">
                    <label for="firstName" class="form-label">FirstName</label>
                    <input type="text" class="form-control"
                           th:value="${user.firstName}"
                           id="firstName" placeholder="User firstName">
                </div>
        <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control"
                   value=""
            id="password" placeholder="Password">
        </div>

        <div>
            <ul>
                <li th:each="role : ${allRoles}">
                    <input type="checkbox" th:field="*{roles}" th:value="${role.id}" th:errorclass="is-invalid"/>
                    <label th:for="${#ids.prev('roles')}" th:text="${role.name}"></label>
                </li>
            </ul>
        </div>
        <div class="alert alert-danger" th:if="${#fields.hasErrors('roles')}">
            <ul>
                <li th:each="err : ${#fields.errors('roles')}" th:text="${err}"/>
            </ul>
        </div>

    </div>
    <div class="row">
        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group me-2" role="group" aria-label="Second group">
                <button onclick="save()" type="button" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>
<script>
<!--    let id = document.getElementById('id');-->
<!--      let description = document.getElementById('email');-->
<!--    let name = document.getElementById('lastName');-->
<!--     let name = document.getElementById('firstName');-->
<!--    let password = document.getElementById('password');-->

<!--    function save() {-->
<!--     let body = {-->
<!--     <% if(user.getId() != null) {%>-->
<!--         id: id.value,-->
<!--      <% } %>-->
<!--        password: password.value,-->
<!--        email: email.value,-->
<!--        lastName: lastName.value,-->
<!--         firstName: firstName.value,-->
<!--      }-->
<!--      <% if(user.getId() == null) {%>-->
<!--         let url = '/users';-->
<!--         let method = 'POST';-->
<!--      <% } else { %>-->
<!--         let url = '/users/<%= user.getId() %>';-->
<!--         let method = 'PUT';-->
<!--      <% } %>-->
<!--        fetch(url, {-->
<!--            method: method,-->
<!--            body: JSON.stringify(body)-->
<!--        })-->
<!--        .then( _ => {-->
<!--            window.location.href = '/users';-->
<!--        }-->
<!--        );-->
<!--    }-->
</script>
</body>
</html>